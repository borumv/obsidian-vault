---
created: Tuesday 17th January 2023 21:03
Last modified: Tuesday 17th January 2023 21:03
Aliases: модель памяти в Java
Tags: java
---

![[Pasted image 20230429140153.png]]

## **Heap (куча)**
Это общее пространство для всех потоков приложения. Размер этой области настраивается с помощью параметра `-Xms` (минимальный размер) и `-Xmx` (максимальный размер)
- Хранение объектов (ссылочных типов данных)
Для оптимизации, память в куче разделена ещё на 4 области, в которые объекты помещаются в зависимости от их "возраста"
1. *Young Generation* (молодое поколение). Здесь создаются *новые объекты*. 
Она разделена на 3 части:
- Eden (Эдем) - в этом пространстве выделяется память для объекта при создании используя ключевое слово *new*
Survivor Spaces - это пространство, в котором находятся объекты, которые выжили после работы [[Сборщик мусора в Java|сборщика мусора]].  
- S0
- S1
Большинство из новых объектов помещаются в Эдеме. Когда эта область заполняется объектами, включается 
2. *Old Generation* (старое поколение). Здесь хранятся давно живущие объекты, которые прошли все этапы сборки мусора в *young generation*
![[Pasted image 20230429140516.png]]

Для очистки от более неиспользуемых объектов (те объекты, на которые никто больше не ссылается), используется [[Сборщик мусора в Java]] 

## Stack(стек)
Для каждого потока создаётся *свой стек*.  Стек содержит фреймы, которые создаются при каждом вызове метода и хранит локальные переменные и промежуточные результаты. возвращают значения для методов и выбрасывают исключения. Фрейм разрушается, когда вызов метода завершается. Размер стэка можно изменить с помощью параметра `Xss1024k` (тут он увеличит его до 1 мб)

- Хранения локальных переменных
- Стека вызова
## Metaspace (метаданные)
Общее пространство для всех потоков. Верхний предел объяма метаданных можно настроить с помощью параметра `MaxMetaspaceSize`. Это часть *native memory*
- Метаданные классов
- Статические переменные
## CodeCache (кэш кода)
[[JIT-компилятор]] компилирует часто исполняемый код и преобразует его в нативный машинный код и *кеширует* для быстрого использования