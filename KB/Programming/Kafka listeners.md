---
created: Friday 10th March 2023 14:14
Last modified: Friday 10th March 2023 14:14
Aliases: —Å–ª—É—à–∞—Ç–µ–ª–∏ –≤ –∫–∞—Ñ–∫–µ
Tags: kafka
---

# [[Kafka listeners]]

üìå

–í [[MOC-DOCKER|docker]]:
`LISTENERS` - –≠—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è [[kafka]]. 
`ADVERTISED_LISTENERS` ‚Äî —ç—Ç–æ —Ç–æ, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è.
![[Pasted image 20230310145106.png]]


–í–∞–º –Ω—É–∂–Ω–æ —Å–æ–æ–±—â–∏—Ç—å Kafka, –∫–∞–∫ –±—Ä–æ–∫–µ—Ä—ã –º–æ–≥—É—Ç —Å–≤—è–∑–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –∞ —Ç–∞–∫–∂–µ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–Ω–µ—à–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏/–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏) –º–æ–≥—É—Ç —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω—É–∂–Ω—ã–º –∏–º –±—Ä–æ–∫–µ—Ä–æ–º.
–ö–ª—é—á–µ–≤—ã–º –º–æ–º–µ–Ω—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∫–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∫–ª–∏–µ–Ω—Ç, [[kafka_brokers|broker]], –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –µ–º—É –ø–µ—Ä–µ–¥–∞–µ—Ç–µ, ‚Äî —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ –º–µ—Å—Ç–æ, –æ—Ç–∫—É–¥–∞ –æ–Ω —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–¥—Ç–∏ –∏ –ø–æ–ª—É—á–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –±—Ä–æ–∫–µ—Ä–∞—Ö –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. 
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç –∏ IP-–∞–¥—Ä–µ—Å, –∫ –∫–æ—Ç–æ—Ä—ã–º –æ–Ω –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –¥–ª—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö, –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—Ä–æ–∫–µ—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ —ç—Ç–æ–º –Ω–∞—á–∞–ª—å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –æ–¥–∏–Ω —É–∑–µ–ª, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –±—Ä–æ–∫–µ—Ä —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –∏ —Ç–æ—Ç, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω. 

–î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –±—Ä–æ–∫–µ—Ä—ã Kafka –º–æ–≥—É—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª—É—à–∞—Ç–µ–ª–µ–π. –°–ª—É—à–∞—Ç–µ–ª—å ‚Äî —ç—Ç–æ —Å–æ—á–µ—Ç–∞–Ω–∏–µ:

–•–æ—Å—Ç/IP-–∞–¥—Ä–µ—Å
–ü–æ—Ä—Ç
–ü—Ä–æ—Ç–æ–∫–æ–ª
–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º –Ω–µ–∫–æ—Ç–æ—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –ß–∞—Å—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –¥–ª—è –∏–º–µ–Ω–∏ —Å–ª—É—à–∞—Ç–µ–ª—è, –Ω–æ –∑–¥–µ—Å—å –¥–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º –µ–≥–æ –∫—Ä–∞—Å–∏–≤—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º, –∏—Å–ø–æ–ª—å–∑—É—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è —Å–ª—É—à–∞—Ç–µ–ª–µ–π:

```yaml
KAFKA_LISTENERS: LISTENER_BOB://kafka0:29092,LISTENER_FRED://localhost:9092
KAFKA_ADVERTISED_LISTENERS: LISTENER_BOB://kafka0:29092,LISTENER_FRED://localhost:9092
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: LISTENER_BOB:PLAINTEXT,LISTENER_FRED:PLAINTEXT
KAFKA_INTER_BROKER_LISTENER_NAME: LISTENER_BOB
```

–≠—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Docker ‚Äî —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç—ã, –µ—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ server.properties –Ω–∞–ø—Ä—è–º—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ AWS –∏ —Ç. –¥.), –ø–æ–∫–∞–∑–∞–Ω—ã —Å –æ—Ç—Å—Ç—É–ø–æ–º –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–ø–∏—Å–∫–µ:

- KAFKA_LISTENERS ‚Äî —ç—Ç–æ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª–µ–π, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—è—Ç—ã–º–∏, –∞ —Ç–∞–∫–∂–µ —Ö–æ—Å—Ç/IP –∏ –ø–æ—Ä—Ç, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è Kafka –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è. –î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π —Å–µ—Ç–∏ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å IP-–∞–¥—Ä–µ—Å, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –¥–∞–Ω–Ω—ã–º —Å–µ—Ç–µ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –Ω–∞ –º–∞—à–∏–Ω–µ. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî 0.0.0.0, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö.
	**`listeners`**
- KAFKA_ADVERTISED_LISTENERS ‚Äî —ç—Ç–æ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª–µ–π, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—è—Ç—ã–º–∏, —Å –∏—Ö —Ö–æ—Å—Ç–æ–º/IP-–∞–¥—Ä–µ—Å–æ–º –∏ –ø–æ—Ä—Ç–æ–º. –≠—Ç–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–∞–º.
	**`advertised.listeners`**
- KAFKA_LISTENER_SECURITY_PROTOCOL_MAP –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—ã –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–º–µ–Ω–∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—è.
	**`listener.security.protocol.map`**

–ë—Ä–æ–∫–µ—Ä—ã Kafka –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–µ—Ç–∏ Docker, AWS VPC –∏ —Ç.¬†–¥.). –ß—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–π —Å–ª—É—à–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —É–∫–∞–∂–∏—Ç–µ KAFKA_INTER_BROKER_LISTENER_NAME(inter.broker.listener.name). –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ö–æ—Å—Ç/IP –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –±—Ä–æ–∫–µ—Ä–∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö.

–ö–ª–∏–µ–Ω—Ç—ã Kafka –≤–ø–æ–ª–Ω–µ –º–æ–≥—É—Ç –Ω–µ –±—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –≤ —Å–µ—Ç–∏ –±—Ä–æ–∫–µ—Ä–∞, –∏ –∏–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å –ø–æ—è–≤–ª—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏.

–ö–∞–∂–¥—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –±—É–¥–µ—Ç —Å–æ–æ–±—â–∞—Ç—å –∞–¥—Ä–µ—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç. *–ê–¥—Ä–µ—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã —Å–≤—è–∑—ã–≤–∞–µ—Ç–µ—Å—å —Å –±—Ä–æ–∫–µ—Ä–æ–º, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —Å–µ—Ç–∏*. –ï—Å–ª–∏ –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å –∫ –±—Ä–æ–∫–µ—Ä—É –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏, —ç—Ç–æ –±—É–¥–µ—Ç –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç/IP, —á–µ–º –ø—Ä–∏ –≤–Ω–µ—à–Ω–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏.

–ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –±—Ä–æ–∫–µ—Ä—É –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω –∫–ª–∏–µ–Ω—Ç—É, –±—É–¥–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª–µ–º, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å (–Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ä—Ç–∞).

**kafkacat** ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ. –ò—Å–ø–æ–ª—å–∑—É—è `-L`, –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–ª—É—à–∞—Ç–µ–ª—è, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å. –ù–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–π –∂–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—è, —á—Ç–æ –∏ –≤—ã—à–µ (`LISTENER_BOB/LISTENER_FRED`), –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –±—Ä–æ–∫–µ—Ä–∞ `0 –ø–æ –∞–¥—Ä–µ—Å—É:` -:

- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ø–æ—Ä—Ç—É 9092 (–∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞–∫ `LISTENER_FRED`) –∞–¥—Ä–µ—Å –±—Ä–æ–∫–µ—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫ `localhost`:
```shell
$ kafkacat -b kafka0:9092 \
           -L
Metadata for all topics (from broker -1: kafka0:9092/bootstrap):
1 brokers:
  broker 0 at localhost:9092
```

- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ø–æ—Ä—Ç—É 29092 (–∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞–∫ `LISTENER_BOB`) –∞–¥—Ä–µ—Å –±—Ä–æ–∫–µ—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫ `kafka0`:
```shell
$ kafkacat -b kafka0:29092 \
           -L
Metadata for all topics (from broker 0: kafka0:29092/0):
1 brokers:
  broker 0 at kafka0:29092
```

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **tcpdump** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, –ø–æ–¥–∫–ª—é—á–∞—é—â–µ–≥–æ—Å—è –∫ –±—Ä–æ–∫–µ—Ä—É, –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–º—è —Ö–æ—Å—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—Ç –±—Ä–æ–∫–µ—Ä–∞.

## –¢–∞–∫ –∫–∞–∫ –∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ö–∞—Ñ–∫—É —Å –î–æ–∫–µ—Ä–æ–º?
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ Docker –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–≤–∞ —Å–ª—É—à–∞—Ç–µ–ª—è –¥–ª—è Kafka:

- **–°–≤—è–∑—å –≤ —Å–µ—Ç–∏ Docker**: —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑—å –º–µ–∂–¥—É –±—Ä–æ–∫–µ—Ä–∞–º–∏ (—Ç. –µ. –º–µ–∂–¥—É –±—Ä–æ–∫–µ—Ä–∞–º–∏) –∏ –º–µ–∂–¥—É –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –≤ Docker, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ Kafka Connect –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏. –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä(—ã) Docker. –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ Docker –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–º—É –∏–º—è —Ö–æ—Å—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—Ä–æ–∫–µ—Ä–∞ Kafka.
- **–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç Docker**: —ç—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∏–µ–Ω—Ç—ã, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä–µ Docker. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω–∏ –±—É–¥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ **`localhost`** –∫ –ø–æ—Ä—Ç—É, –æ—Ç–∫—Ä—ã—Ç–æ–º—É –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Docker. 
–í–æ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ Docker Compose:
```yaml
kafka0:
	image: "confluentinc/cp-enterprise-kafka:5.2.1"
	ports:
		- '9092:9092'
		- '29094:29094'
	depends_on:
		- zookeeper
	environment:
		KAFKA_LISTENERS: LISTENER_BOB://kafka0:29092,LISTENER_FRED://kafka0:9092,LISTENER_ALICE://kafka0:29094
		KAFKA_ADVERTISED_LISTENERS: LISTENER_BOB://kafka0:29092,LISTENER_FRED://localhost:9092,LISTENER_ALICE://never-gonna-give-you-up:29094
		KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: LISTENER_BOB:PLAINTEXT,LISTENER_FRED:PLAINTEXT,LISTENER_ALICE:PLAINTEXT
		KAFKA_INTER_BROKER_LISTENER_NAME: LISTENER_BOB
```

- –ö–ª–∏–µ–Ω—Ç—ã –≤ —Å–µ—Ç–∏ Docker –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ª—É—à–∞—Ç–µ–ª—è `BOB` —Å –ø–æ—Ä—Ç–æ–º 29092 –∏ –∏–º–µ–Ω–µ–º —Ö–æ—Å—Ç–∞ `kafka0`. –ü—Ä–∏ —ç—Ç–æ–º –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–±—Ä–∞—Ç–Ω–æ –∏–º—è —Ö–æ—Å—Ç–∞ `kafka0`, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è. –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–∞—Ç—å kafka0, –∏—Å–ø–æ–ª—å–∑—É—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å Docker, –∏ —Å–º–æ–∂–µ—Ç —Å–≤—è–∑–∞—Ç—å—Å—è —Å –±—Ä–æ–∫–µ—Ä–æ–º.
- –ö–ª–∏–µ–Ω—Ç—ã, –≤–Ω–µ—à–Ω–∏–µ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–µ—Ç–∏ Docker, –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—è `FRED` —Å –ø–æ—Ä—Ç–æ–º 9092 –∏ –∏–º–µ–Ω–µ–º —Ö–æ—Å—Ç–∞ `localhost`. –ü–æ—Ä—Ç 9092 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º Docker –∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è, –∏–º –¥–∞–µ—Ç—Å—è –∏–º—è —Ö–æ—Å—Ç–∞ `localhost` –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –±—Ä–æ–∫–µ—Ä–∞, –∏ –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –Ω–µ–º—É –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏/–∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö.
- –ü—Ä–∏–≤–µ–¥–µ–Ω–Ω–∞—è –≤—ã—à–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–ª–∏–µ–Ω—Ç, –≤–Ω–µ—à–Ω–∏–π –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ Docker –∏ –≤–Ω–µ—à–Ω–∏–π –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä—É, —Ö–æ—á–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –Ω–∏ `kafka0` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏–º—è —Ö–æ—Å—Ç–∞ Docker), –Ω–∏ `localhost` (–ø–µ—Ç–ª–µ–≤–æ–π –∞–¥—Ä–µ—Å –¥–ª—è —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä–∞ Docker) –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω—ã.


### –ö–ê–ö KAFKA –û–ë–©–ê–ï–¢–°–Ø?

–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç Apache Kafka¬Æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:

- –ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±—Ä–æ–∫–µ—Ä—É (–±—É—Ç—Å—Ç—Ä–∞–ø). –≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—É, –≤–∫–ª—é—á–∞—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—Ä–æ–∫–µ—Ä–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏ –∏—Ö –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
- –ó–∞—Ç–µ–º –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É (–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º) –±—Ä–æ–∫–µ—Ä–∞–º, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–º –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ. –ï—Å–ª–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ.
–ò–Ω–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è —Ç–∞–∫, —á—Ç–æ –ª—é–¥–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —à–∞–≥–µ 1, –æ–ø–∏—Å–∞–Ω–Ω–æ–º –≤—ã—à–µ, –∏ –æ—Ç–≤–ª–µ–∫–∞—é—Ç—Å—è –Ω–∞ —à–∞–≥–µ 2. –°–≤–µ–¥–µ–Ω–∏—è –æ –±—Ä–æ–∫–µ—Ä–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –Ω–∞ —à–∞–≥–µ 1, –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º Advertisingd.listeners –±—Ä–æ–∫–µ—Ä–∞(–æ–≤) –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –º–∞—à–∏–Ω–∞.

–ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ, —Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –∞ —Ç–∞–∫–∂–µ —ç—Ç—É –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç–∞—Ç—å—é, –∫–æ—Ç–æ—Ä—É—é —è –Ω–∞–ø–∏—Å–∞–ª. –ï—Å–ª–∏ —Ç–æ–Ω–∫–æ—Å—Ç–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ‚Äî —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, –∏ –≤—ã –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–∏—Å–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é Kafka, –≤–∞–º —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Confluent Cloud. –≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è —Å–ª—É–∂–±–∞ Apache Kafka –≤ –æ–±–ª–∞–∫–µ, –±–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Advertising.listeners, –æ –∫–æ—Ç–æ—Ä–æ–π –≤–∞–º —Å—Ç–æ–∏—Ç –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è!

–ù–∏–∂–µ —è –∏—Å–ø–æ–ª—å–∑—É—é –∫–ª–∏–µ–Ω—Ç, –ø–æ–¥–∫–ª—é—á–∞—é—â–∏–π—Å—è –∫ Kafka –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö —Ç–æ–ø–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –û–Ω –Ω–∞–ø–∏—Å–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Python —Å librdkafka (confluent_kafka), –Ω–æ —ç—Ç–æ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –ø—Ä–∏–º–µ–Ω–∏–º –∫ –∫–ª–∏–µ–Ω—Ç–∞–º –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –∫–æ–¥ –Ω–∞ GitHub. –≠—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –∏ –ø—Ä–æ—Å—Ç–æ —Å–ª—É–∂–∏—Ç –¥–ª—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –£–ø—Ä–æ—â–µ–Ω–æ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –∑–∞ —Å—á–µ—Ç —Ö–æ—Ä–æ—à–µ–≥–æ –∫–æ–¥–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ üôÇ