---
created: Monday 15th May 2023 10:25
Last modified: Monday 15th May 2023 10:25
Aliases: тест lifecycle
Tags: programming
---

Полный жизненный цикл тестового сценария можно разделить на три фазы с помощью аннотаций.
1.**Setup** (настройка): на этом этапе создается тестовая инфраструктура. JUnit обеспечивает _настройку уровня класса_ (@BeforeAll) и _настройку уровня метода_ (@BeforeEach). Как правило, тяжелые объекты, такие как подключения к базам данных, создаются при настройке уровня класса, в то время как легкие объекты, такие как тестовые объекты, перезапускаются при настройке уровня метода.
2.**Test Execution** (выполнение теста): на этом этапе происходит выполнение теста и _assertion_. Результат выполнения будет означать успех или неудачу теста.
3.**Cleanup** (очистка): этот этап используется для очистки настройки тестовой инфраструктуры, настроенной на первом этапе. Как на этане настройки, очистка также выполняется _на уровне класса_ (@AfterAll) и _уровне метода_ (@AfterEach).
![[Pasted image 20230515100355.png]]

### Внедрение через callbacks
Существует механизм внедрения в промежуточные стадии наших тестов через механизм коллбэков, которые на самом деле являются интерфейсами.
![[Pasted image 20230515102840.png|300]]
Именно благодаря этому мы так красиво можем использовать **`@ExtendWith(MockitoExtension.class)`**, потому что если заглянуть внутрь `MockitoExtension.class`, мы увидем:
```java
public class MockitoExtension implements BeforeEachCallback, AfterEachCallback, ParameterResolver {
	...
	}
```
