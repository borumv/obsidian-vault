---
created: Saturday 29th April 2023 15:08
Last modified: Saturday 29th April 2023 15:07
Aliases: gc, garbage collector
Tags: programming, java
---


Сборщик мусор - это специальный компонент в [[Java Virtual Machine|JVM]], который занимается сборкой "мусора", тем самым высвобождая память   

Для сборки мусора используется алгоритм пометок (Mark & Sweep). Этот алгоритм состоит из трех этапов:

1.**Mark (маркировка)**. На первом этапе GC сканирует все объекты и помечает живые (объекты, которые все еще используются). На этом шаге выполнение программы приостанавливается. Поэтому этот шаг также называется "*Stop the World*".
2.**Sweep (очистка)**. На этом шаге освобождается память, занятая объектами, не отмеченными на предыдущем шаге.
3.**Compact (уплотнение)**. Объекты, пережившие очистку, перемещаются в единый  непрерывный блок памяти. Это уменьшает фрагментацию кучи и позволяет проще и быстрее размещать новые объекты.

![[Pasted image 20230430101253.png]]

Как происходит сборка мусора в [[Heap java|хипе]], используя поколения:
1.Новые объекты создаются в области *Eden*. Области Survivor (S0, S1) на данный момент пустые.  
2.Когда область Eden заполняется, происходит **минорная сборка мусора (Minor GC)**. Minor GC — это процесс, при котором операции mark и sweep выполняются для young generation (молодого поколения).
3.После *Minor GC* живые объекты перемещаются в одну из областей *Survivor* (например, S0). Мертвые объекты полностью удаляются.
4.По мере работы приложения пространство Eden заполняется новыми объектами. При очередном Minor GC области young generation и S0 очищаются. На этот раз выжившие объекты перемещаются в область S1, и их возраст увеличивается (отметка о том, что они пережили сборку мусора).
5.При следующем Minor GC процесс повторяется. Однако на этот раз области Survivor меняются местами. Живые объекты перемещаются в S0 и у них увеличивается возраст. Области Eden и S1 очищаются.
6.Объекты между областями Survivor копируются определенное количество раз (пока не переживут определенное количество Minor GC) или пока там достаточно места. Затем эти объекты копируются в область Old.  
7.Major GC. При **Major GC** этапы mark и sweep выполняются для Old Generation. Major GC работает медленнее по сравнению с Minor GC, поскольку старое поколение в основном состоит из живых объектов.

Типы сборщиков мусора:
