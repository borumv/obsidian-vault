Для работы с геоданными по [[PostgreSql]] есть PostGIS.

**PostGIS** — программное расширение с открытым исходным кодом, расширяющее пространственную базу данных системы управления PostgreSQL. Расширение добавляет поддержку географических объектов, благодаря чему появляется возможность выполнять запросы местоположения в SQL.
В PostGIS для хранения точек есть отдельный тип `Point`, а также два базовых типа `Geometry` и `Geography`. Однако [[_Hibernate]] с `Geography не работает`
Чтобы указать запись в поле `point`, то нужен SRID, который по умолчанию имеет значение 4326

**SRID** — это **Spatial Reference System Identifier**, или идентификатор системы пространственной привязки. То есть это набор правил, описывающих, как определять местоположение объекта в пространстве и как преобразовывать координаты между разными системами и единицами измерений. Кроме того, система пространственной привязки зависит от конкретной проекции. У каждой такой системы есть идентификатор, в большинстве случаев совпадающий с кодом EPSG.

**SRID 4326** — это идентификатор проекции Меркатора для геоида описанного в WGS 84.
**SRID 3395** -  описывает проекцию Меркатора на сфероиде и используется, например, Яндексом в его картах для реализации тайлового деления.
**SRID 3857** - используется в картах Google и описывает проекцию Меркатора на сфере.

**Код EPSG** — это код системы в общепринятом реестре EPSG, содержащем наборы геодезических данных, системы представления, спецификации геоэллипсоидов, системы координат, единицы измерения и правила преобразования.

**WGS** — это **World Geodetic System**. Стандарт для использования в картографии, геодезии и навигации, включающий описание фундаментальных и производных констант.

**WGS 84** — это единая всемирная система геодезических координат, определяющая координаты относительно центра масс Земли (планета накренена вытянутой частью в сторону солнца).


**Проекция Меркатора** — это сохраняющая углы прямоугольная проекция с переменным масштабом, который увеличивается к полюсам, а по вертикали и горизонтали остаётся неизменным. Меридианы на этой проекции представлены в виде параллельных равноудалённых вертикальных линий, а параллели — в виде параллельных горизонтальных, расстояние между которыми увеличивается по мере удаления от экватора. Эта проекция не сохраняет расстояния и площади и используется в морской навигации и авиации.

**![[Pasted image 20220516105500.png]]**


**Hibernate Spatial** - изначально разрабатывался как расширение для Hibernate, позволяющее работать с географическими данными. Начиная с Hibernate 5.0 Spatial является частью основного проекта ORM. Hibernate Spatial предоставляет стандартизированный интерфейс между базами данных для хранения географических данных и функций запросов. Java не представляет в своей стандартной библиотеке инструментария для работы с пространственными типами. Тут на помощь приходят внешние геометрические модели. Hibernate умеет работать с двумя из них: **JTS** и **Geolatte-geom**. В примерах, которые я разбирал, решая реальную рабочую задачу на проекте,  почти всегда используется JTS

Диаграмма иерархии типов PostGIS:
![[Pasted image 20220516111000.png]]

На диаграме описан тип Geometry, но есть ещё и тип Geography, основа которого является сфера ( в geometry - плоскость)

source: https://habr.com/ru/company/domclick/blog/558876/